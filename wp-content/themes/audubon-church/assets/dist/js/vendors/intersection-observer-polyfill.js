!function(){"use strict";var d,e;function c(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||n(),this.isIntersecting=!!t.intersectionRect;var t=this.boundingClientRect,t=t.width*t.height,e=this.intersectionRect,e=e.width*e.height;this.intersectionRatio=t?Number((e/t).toFixed(4)):this.isIntersecting?1:0}function t(t,e){var n,o,i,e=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(e.root&&1!=e.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),o=this.THROTTLE_TIMEOUT,i=null,function(){i=i||setTimeout(function(){n(),i=null},o)}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(e.rootMargin),this.thresholds=this._initThresholds(e.threshold),this.root=e.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function r(t,e,n,o){"function"==typeof t.addEventListener?t.addEventListener(e,n,o||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function s(t,e,n,o){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,o||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function f(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?e.width&&e.height?e:{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}:n()}function n(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function o(t,e){for(var n=e;n;){if(n==t)return!0;n=g(n)}return!1}function g(t){var e=t.parentNode;return 9==t.nodeType&&t!=d?h(t):e&&11==e.nodeType&&e.host?e.host:e&&e.assignedSlot?e.assignedSlot.parentNode:e}function h(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch(t){return null}}"object"==typeof window&&("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}):(d=window.document,e=[],t.prototype.THROTTLE_TIMEOUT=100,t.prototype.POLL_INTERVAL=null,t.prototype.USE_MUTATION_OBSERVER=!0,t.prototype.observe=function(e){var t=this._observationTargets.some(function(t){return t.element==e});if(!t){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},t.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},t.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},t.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},t.prototype._initThresholds=function(t){t=t||[0];return(t=Array.isArray(t)?t:[t]).sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||1<t)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},t.prototype._parseRootMargin=function(t){t=(t||"0px").split(/\s+/).map(function(t){t=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(t)return{value:parseFloat(t[1]),unit:t[2]};throw new Error("rootMargin must be specified in pixels or percent")});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},t.prototype._monitorIntersections=function(e){var n,o,i,t=e.defaultView;t&&-1==this._monitoringDocuments.indexOf(e)&&(n=this._checkForIntersections,i=o=null,this.POLL_INTERVAL?o=t.setInterval(n,this.POLL_INTERVAL):(r(t,"resize",n,!0),r(e,"scroll",n,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in t&&(i=new t.MutationObserver(n)).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(e),this._monitoringUnsubscribes.push(function(){var t=e.defaultView;t&&(o&&t.clearInterval(o),s(t,"resize",n,!0)),s(e,"scroll",n,!0),i&&i.disconnect()}),e!=(this.root&&this.root.ownerDocument||d)&&(t=h(e))&&this._monitorIntersections(t.ownerDocument))},t.prototype._unmonitorIntersections=function(o){var i,t,e=this._monitoringDocuments.indexOf(o);-1!=e&&(i=this.root&&this.root.ownerDocument||d,this._observationTargets.some(function(t){if((e=t.element.ownerDocument)==o)return!0;for(;e&&e!=i;){var e,n=h(e);if((e=n&&n.ownerDocument)==o)return!0}return!1})||(t=this._monitoringUnsubscribes[e],this._monitoringDocuments.splice(e,1),this._monitoringUnsubscribes.splice(e,1),t(),o!=i&&(e=h(o))&&this._unmonitorIntersections(e.ownerDocument)))},t.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0;for(var e=this._monitoringUnsubscribes.length=0;e<t.length;e++)t[e]()},t.prototype._checkForIntersections=function(){var s=this._rootIsInDom(),h=s?this._getRootRect():n();this._observationTargets.forEach(function(t){var e=t.element,n=f(e),o=this._rootContainsTarget(e),i=t.entry,r=s&&o&&this._computeTargetAndRootIntersection(e,n,h),t=t.entry=new c({time:window.performance&&performance.now&&performance.now(),target:e,boundingClientRect:n,rootBounds:h,intersectionRect:r});i?s&&o?this._hasCrossedThreshold(i,t)&&this._queuedEntries.push(t):i&&i.isIntersecting&&this._queuedEntries.push(t):this._queuedEntries.push(t)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},t.prototype._computeTargetAndRootIntersection=function(t,e,n){if("none"!=window.getComputedStyle(t).display){for(var o,i,r=e,s=g(t),h=!1;!h&&s;){var c,u,a,l=null,p=1==s.nodeType?window.getComputedStyle(s):{};if("none"==p.display)return null;if(s==this.root||9==s.nodeType?(h=!0,s==this.root||s==d?l=n:(a=(c=g(s))&&f(c),u=c&&this._computeTargetAndRootIntersection(c,a,n),a&&u?(s=c,c=a,a=void 0,a=u.top-c.top,c=u.left-c.left,l={top:a,left:c,height:u.height,width:u.width,bottom:a+u.height,right:c+u.width}):r=s=null)):s!=(a=s.ownerDocument).body&&s!=a.documentElement&&"visible"!=p.overflow&&(l=f(s)),l&&(c=l,u=r,i=o=l=p=void 0,p=Math.max(c.top,u.top),l=Math.min(c.bottom,u.bottom),o=Math.max(c.left,u.left),c=Math.min(c.right,u.right),i=l-p,r=0<=(u=c-o)&&0<=i?{top:p,bottom:l,left:o,right:c,width:u,height:i}:null),!r)break;s=s&&g(s)}return r}},t.prototype._getRootRect=function(){var t,e;return e=this.root?f(this.root):(e=d.documentElement,t=d.body,{top:0,left:0,right:e.clientWidth||t.clientWidth,width:e.clientWidth||t.clientWidth,bottom:e.clientHeight||t.clientHeight,height:e.clientHeight||t.clientHeight}),this._expandRectByRootMargin(e)},t.prototype._expandRectByRootMargin=function(n){var t=this._rootMarginValues.map(function(t,e){return"px"==t.unit?t.value:t.value*(e%2?n.width:n.height)/100}),t={top:n.top-t[0],right:n.right+t[1],bottom:n.bottom+t[2],left:n.left-t[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},t.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,o=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==o)for(var i=0;i<this.thresholds.length;i++){var r=this.thresholds[i];if(r==n||r==o||r<n!=r<o)return!0}},t.prototype._rootIsInDom=function(){return!this.root||o(d,this.root)},t.prototype._rootContainsTarget=function(t){return o(this.root||d,t)&&(!this.root||this.root.ownerDocument==t.ownerDocument)},t.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},t.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=t,window.IntersectionObserverEntry=c))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXItcG9seWZpbGwuanMiLCJzb3VyY2VzIjpbInZlbmRvcnMvaW50ZXJzZWN0aW9uLW9ic2VydmVyLXBvbHlmaWxsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgVzNDIFNPRlRXQVJFIEFORCBET0NVTUVOVCBOT1RJQ0UgQU5EIExJQ0VOU0UuXG4gKlxuICogIGh0dHBzOi8vd3d3LnczLm9yZy9Db25zb3J0aXVtL0xlZ2FsLzIwMTUvY29weXJpZ2h0LXNvZnR3YXJlLWFuZC1kb2N1bWVudFxuICpcbiAqL1xuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICAvLyBFeGl0IGVhcmx5IGlmIHdlJ3JlIG5vdCBydW5uaW5nIGluIGEgYnJvd3Nlci5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gRXhpdCBlYXJseSBpZiBhbGwgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgYW5kIEludGVyc2VjdGlvbk9ic2VydmVyRW50cnlcbiAgICAvLyBmZWF0dXJlcyBhcmUgbmF0aXZlbHkgc3VwcG9ydGVkLlxuICAgIGlmICgnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInIGluIHdpbmRvdyAmJlxuICAgICAgICAnSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeScgaW4gd2luZG93ICYmXG4gICAgICAgICdpbnRlcnNlY3Rpb25SYXRpbycgaW4gd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyRW50cnkucHJvdG90eXBlKSB7XG4gICAgXG4gICAgICAvLyBNaW5pbWFsIHBvbHlmaWxsIGZvciBFZGdlIDE1J3MgbGFjayBvZiBgaXNJbnRlcnNlY3RpbmdgXG4gICAgICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS93M2MvSW50ZXJzZWN0aW9uT2JzZXJ2ZXIvaXNzdWVzLzIxMVxuICAgICAgaWYgKCEoJ2lzSW50ZXJzZWN0aW5nJyBpbiB3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeS5wcm90b3R5cGUpKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeS5wcm90b3R5cGUsXG4gICAgICAgICAgJ2lzSW50ZXJzZWN0aW5nJywge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJzZWN0aW9uUmF0aW8gPiAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIEEgbG9jYWwgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICB2YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XG4gICAgXG4gICAgXG4gICAgLyoqXG4gICAgICogQW4gSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgcmVnaXN0cnkuIFRoaXMgcmVnaXN0cnkgZXhpc3RzIHRvIGhvbGQgYSBzdHJvbmdcbiAgICAgKiByZWZlcmVuY2UgdG8gSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaW5zdGFuY2VzIGN1cnJlbnRseSBvYnNlcnZpbmcgYSB0YXJnZXRcbiAgICAgKiBlbGVtZW50LiBXaXRob3V0IHRoaXMgcmVnaXN0cnksIGluc3RhbmNlcyB3aXRob3V0IGFub3RoZXIgcmVmZXJlbmNlIG1heSBiZVxuICAgICAqIGdhcmJhZ2UgY29sbGVjdGVkLlxuICAgICAqL1xuICAgIHZhciByZWdpc3RyeSA9IFtdO1xuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIGdsb2JhbCBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5IGNvbnN0cnVjdG9yLlxuICAgICAqIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9JbnRlcnNlY3Rpb25PYnNlcnZlci8jaW50ZXJzZWN0aW9uLW9ic2VydmVyLWVudHJ5XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGVudHJ5IEEgZGljdGlvbmFyeSBvZiBpbnN0YW5jZSBwcm9wZXJ0aWVzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEludGVyc2VjdGlvbk9ic2VydmVyRW50cnkoZW50cnkpIHtcbiAgICAgIHRoaXMudGltZSA9IGVudHJ5LnRpbWU7XG4gICAgICB0aGlzLnRhcmdldCA9IGVudHJ5LnRhcmdldDtcbiAgICAgIHRoaXMucm9vdEJvdW5kcyA9IGVudHJ5LnJvb3RCb3VuZHM7XG4gICAgICB0aGlzLmJvdW5kaW5nQ2xpZW50UmVjdCA9IGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdDtcbiAgICAgIHRoaXMuaW50ZXJzZWN0aW9uUmVjdCA9IGVudHJ5LmludGVyc2VjdGlvblJlY3QgfHwgZ2V0RW1wdHlSZWN0KCk7XG4gICAgICB0aGlzLmlzSW50ZXJzZWN0aW5nID0gISFlbnRyeS5pbnRlcnNlY3Rpb25SZWN0O1xuICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlcyB0aGUgaW50ZXJzZWN0aW9uIHJhdGlvLlxuICAgICAgdmFyIHRhcmdldFJlY3QgPSB0aGlzLmJvdW5kaW5nQ2xpZW50UmVjdDtcbiAgICAgIHZhciB0YXJnZXRBcmVhID0gdGFyZ2V0UmVjdC53aWR0aCAqIHRhcmdldFJlY3QuaGVpZ2h0O1xuICAgICAgdmFyIGludGVyc2VjdGlvblJlY3QgPSB0aGlzLmludGVyc2VjdGlvblJlY3Q7XG4gICAgICB2YXIgaW50ZXJzZWN0aW9uQXJlYSA9IGludGVyc2VjdGlvblJlY3Qud2lkdGggKiBpbnRlcnNlY3Rpb25SZWN0LmhlaWdodDtcbiAgICBcbiAgICAgIC8vIFNldHMgaW50ZXJzZWN0aW9uIHJhdGlvLlxuICAgICAgaWYgKHRhcmdldEFyZWEpIHtcbiAgICAgICAgLy8gUm91bmQgdGhlIGludGVyc2VjdGlvbiByYXRpbyB0byBhdm9pZCBmbG9hdGluZyBwb2ludCBtYXRoIGlzc3VlczpcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3czYy9JbnRlcnNlY3Rpb25PYnNlcnZlci9pc3N1ZXMvMzI0XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uUmF0aW8gPSBOdW1iZXIoKGludGVyc2VjdGlvbkFyZWEgLyB0YXJnZXRBcmVhKS50b0ZpeGVkKDQpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIGFyZWEgaXMgemVybyBhbmQgaXMgaW50ZXJzZWN0aW5nLCBzZXRzIHRvIDEsIG90aGVyd2lzZSB0byAwXG4gICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uUmF0aW8gPSB0aGlzLmlzSW50ZXJzZWN0aW5nID8gMSA6IDA7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIGdsb2JhbCBJbnRlcnNlY3Rpb25PYnNlcnZlciBjb25zdHJ1Y3Rvci5cbiAgICAgKiBodHRwczovL3czYy5naXRodWIuaW8vSW50ZXJzZWN0aW9uT2JzZXJ2ZXIvI2ludGVyc2VjdGlvbi1vYnNlcnZlci1pbnRlcmZhY2VcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCBhZnRlciBpbnRlcnNlY3Rpb25cbiAgICAgKiAgICAgY2hhbmdlcyBoYXZlIHF1ZXVlZC4gVGhlIGZ1bmN0aW9uIGlzIG5vdCBpbnZva2VkIGlmIHRoZSBxdWV1ZSBoYXNcbiAgICAgKiAgICAgYmVlbiBlbXB0aWVkIGJ5IGNhbGxpbmcgdGhlIGB0YWtlUmVjb3Jkc2AgbWV0aG9kLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X29wdGlvbnMgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEludGVyc2VjdGlvbk9ic2VydmVyKGNhbGxiYWNrLCBvcHRfb3B0aW9ucykge1xuICAgIFxuICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICBcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgfVxuICAgIFxuICAgICAgaWYgKG9wdGlvbnMucm9vdCAmJiBvcHRpb25zLnJvb3Qubm9kZVR5cGUgIT0gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Jvb3QgbXVzdCBiZSBhbiBFbGVtZW50Jyk7XG4gICAgICB9XG4gICAgXG4gICAgICAvLyBCaW5kcyBhbmQgdGhyb3R0bGVzIGB0aGlzLl9jaGVja0ZvckludGVyc2VjdGlvbnNgLlxuICAgICAgdGhpcy5fY2hlY2tGb3JJbnRlcnNlY3Rpb25zID0gdGhyb3R0bGUoXG4gICAgICAgICAgdGhpcy5fY2hlY2tGb3JJbnRlcnNlY3Rpb25zLmJpbmQodGhpcyksIHRoaXMuVEhST1RUTEVfVElNRU9VVCk7XG4gICAgXG4gICAgICAvLyBQcml2YXRlIHByb3BlcnRpZXMuXG4gICAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgdGhpcy5fb2JzZXJ2YXRpb25UYXJnZXRzID0gW107XG4gICAgICB0aGlzLl9xdWV1ZWRFbnRyaWVzID0gW107XG4gICAgICB0aGlzLl9yb290TWFyZ2luVmFsdWVzID0gdGhpcy5fcGFyc2VSb290TWFyZ2luKG9wdGlvbnMucm9vdE1hcmdpbik7XG4gICAgXG4gICAgICAvLyBQdWJsaWMgcHJvcGVydGllcy5cbiAgICAgIHRoaXMudGhyZXNob2xkcyA9IHRoaXMuX2luaXRUaHJlc2hvbGRzKG9wdGlvbnMudGhyZXNob2xkKTtcbiAgICAgIHRoaXMucm9vdCA9IG9wdGlvbnMucm9vdCB8fCBudWxsO1xuICAgICAgdGhpcy5yb290TWFyZ2luID0gdGhpcy5fcm9vdE1hcmdpblZhbHVlcy5tYXAoZnVuY3Rpb24obWFyZ2luKSB7XG4gICAgICAgIHJldHVybiBtYXJnaW4udmFsdWUgKyBtYXJnaW4udW5pdDtcbiAgICAgIH0pLmpvaW4oJyAnKTtcbiAgICBcbiAgICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBcnJheTwhRG9jdW1lbnQ+fSAqL1xuICAgICAgdGhpcy5fbW9uaXRvcmluZ0RvY3VtZW50cyA9IFtdO1xuICAgICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUFycmF5PGZ1bmN0aW9uKCk+fSAqL1xuICAgICAgdGhpcy5fbW9uaXRvcmluZ1Vuc3Vic2NyaWJlcyA9IFtdO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvKipcbiAgICAgKiBUaGUgbWluaW11bSBpbnRlcnZhbCB3aXRoaW4gd2hpY2ggdGhlIGRvY3VtZW50IHdpbGwgYmUgY2hlY2tlZCBmb3JcbiAgICAgKiBpbnRlcnNlY3Rpb24gY2hhbmdlcy5cbiAgICAgKi9cbiAgICBJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuVEhST1RUTEVfVElNRU9VVCA9IDEwMDtcbiAgICBcbiAgICBcbiAgICAvKipcbiAgICAgKiBUaGUgZnJlcXVlbmN5IGluIHdoaWNoIHRoZSBwb2x5ZmlsbCBwb2xscyBmb3IgaW50ZXJzZWN0aW9uIGNoYW5nZXMuXG4gICAgICogdGhpcyBjYW4gYmUgdXBkYXRlZCBvbiBhIHBlciBpbnN0YW5jZSBiYXNpcyBhbmQgbXVzdCBiZSBzZXQgcHJpb3IgdG9cbiAgICAgKiBjYWxsaW5nIGBvYnNlcnZlYCBvbiB0aGUgZmlyc3QgdGFyZ2V0LlxuICAgICAqL1xuICAgIEludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5QT0xMX0lOVEVSVkFMID0gbnVsbDtcbiAgICBcbiAgICAvKipcbiAgICAgKiBVc2UgYSBtdXRhdGlvbiBvYnNlcnZlciBvbiB0aGUgcm9vdCBlbGVtZW50XG4gICAgICogdG8gZGV0ZWN0IGludGVyc2VjdGlvbiBjaGFuZ2VzLlxuICAgICAqL1xuICAgIEludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5VU0VfTVVUQVRJT05fT0JTRVJWRVIgPSB0cnVlO1xuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBvYnNlcnZpbmcgYSB0YXJnZXQgZWxlbWVudCBmb3IgaW50ZXJzZWN0aW9uIGNoYW5nZXMgYmFzZWQgb25cbiAgICAgKiB0aGUgdGhyZXNob2xkcyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXQgVGhlIERPTSBlbGVtZW50IHRvIG9ic2VydmUuXG4gICAgICovXG4gICAgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgIHZhciBpc1RhcmdldEFscmVhZHlPYnNlcnZlZCA9IHRoaXMuX29ic2VydmF0aW9uVGFyZ2V0cy5zb21lKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0uZWxlbWVudCA9PSB0YXJnZXQ7XG4gICAgICB9KTtcbiAgICBcbiAgICAgIGlmIChpc1RhcmdldEFscmVhZHlPYnNlcnZlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgXG4gICAgICBpZiAoISh0YXJnZXQgJiYgdGFyZ2V0Lm5vZGVUeXBlID09IDEpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndGFyZ2V0IG11c3QgYmUgYW4gRWxlbWVudCcpO1xuICAgICAgfVxuICAgIFxuICAgICAgdGhpcy5fcmVnaXN0ZXJJbnN0YW5jZSgpO1xuICAgICAgdGhpcy5fb2JzZXJ2YXRpb25UYXJnZXRzLnB1c2goe2VsZW1lbnQ6IHRhcmdldCwgZW50cnk6IG51bGx9KTtcbiAgICAgIHRoaXMuX21vbml0b3JJbnRlcnNlY3Rpb25zKHRhcmdldC5vd25lckRvY3VtZW50KTtcbiAgICAgIHRoaXMuX2NoZWNrRm9ySW50ZXJzZWN0aW9ucygpO1xuICAgIH07XG4gICAgXG4gICAgXG4gICAgLyoqXG4gICAgICogU3RvcHMgb2JzZXJ2aW5nIGEgdGFyZ2V0IGVsZW1lbnQgZm9yIGludGVyc2VjdGlvbiBjaGFuZ2VzLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IFRoZSBET00gZWxlbWVudCB0byBvYnNlcnZlLlxuICAgICAqL1xuICAgIEludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS51bm9ic2VydmUgPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgIHRoaXMuX29ic2VydmF0aW9uVGFyZ2V0cyA9XG4gICAgICAgICAgdGhpcy5fb2JzZXJ2YXRpb25UYXJnZXRzLmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5lbGVtZW50ICE9IHRhcmdldDtcbiAgICAgICAgICB9KTtcbiAgICAgIHRoaXMuX3VubW9uaXRvckludGVyc2VjdGlvbnModGFyZ2V0Lm93bmVyRG9jdW1lbnQpO1xuICAgICAgaWYgKHRoaXMuX29ic2VydmF0aW9uVGFyZ2V0cy5sZW5ndGggPT0gMCkge1xuICAgICAgICB0aGlzLl91bnJlZ2lzdGVySW5zdGFuY2UoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIFN0b3BzIG9ic2VydmluZyBhbGwgdGFyZ2V0IGVsZW1lbnRzIGZvciBpbnRlcnNlY3Rpb24gY2hhbmdlcy5cbiAgICAgKi9cbiAgICBJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fb2JzZXJ2YXRpb25UYXJnZXRzID0gW107XG4gICAgICB0aGlzLl91bm1vbml0b3JBbGxJbnRlcnNlY3Rpb25zKCk7XG4gICAgICB0aGlzLl91bnJlZ2lzdGVySW5zdGFuY2UoKTtcbiAgICB9O1xuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW55IHF1ZXVlIGVudHJpZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiByZXBvcnRlZCB0byB0aGVcbiAgICAgKiBjYWxsYmFjayBhbmQgY2xlYXJzIHRoZSBxdWV1ZS4gVGhpcyBjYW4gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZVxuICAgICAqIGNhbGxiYWNrIHRvIG9idGFpbiB0aGUgYWJzb2x1dGUgbW9zdCB1cC10by1kYXRlIGludGVyc2VjdGlvbiBpbmZvcm1hdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGN1cnJlbnRseSBxdWV1ZWQgZW50cmllcy5cbiAgICAgKi9cbiAgICBJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUudGFrZVJlY29yZHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWNvcmRzID0gdGhpcy5fcXVldWVkRW50cmllcy5zbGljZSgpO1xuICAgICAgdGhpcy5fcXVldWVkRW50cmllcyA9IFtdO1xuICAgICAgcmV0dXJuIHJlY29yZHM7XG4gICAgfTtcbiAgICBcbiAgICBcbiAgICAvKipcbiAgICAgKiBBY2NlcHRzIHRoZSB0aHJlc2hvbGQgdmFsdWUgZnJvbSB0aGUgdXNlciBjb25maWd1cmF0aW9uIG9iamVjdCBhbmRcbiAgICAgKiByZXR1cm5zIGEgc29ydGVkIGFycmF5IG9mIHVuaXF1ZSB0aHJlc2hvbGQgdmFsdWVzLiBJZiBhIHZhbHVlIGlzIG5vdFxuICAgICAqIGJldHdlZW4gMCBhbmQgMSBhbmQgZXJyb3IgaXMgdGhyb3duLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheXxudW1iZXI9fSBvcHRfdGhyZXNob2xkIEFuIG9wdGlvbmFsIHRocmVzaG9sZCB2YWx1ZSBvclxuICAgICAqICAgICBhIGxpc3Qgb2YgdGhyZXNob2xkIHZhbHVlcywgZGVmYXVsdGluZyB0byBbMF0uXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgc29ydGVkIGxpc3Qgb2YgdW5pcXVlIGFuZCB2YWxpZCB0aHJlc2hvbGQgdmFsdWVzLlxuICAgICAqL1xuICAgIEludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5faW5pdFRocmVzaG9sZHMgPSBmdW5jdGlvbihvcHRfdGhyZXNob2xkKSB7XG4gICAgICB2YXIgdGhyZXNob2xkID0gb3B0X3RocmVzaG9sZCB8fCBbMF07XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhyZXNob2xkKSkgdGhyZXNob2xkID0gW3RocmVzaG9sZF07XG4gICAgXG4gICAgICByZXR1cm4gdGhyZXNob2xkLnNvcnQoKS5maWx0ZXIoZnVuY3Rpb24odCwgaSwgYSkge1xuICAgICAgICBpZiAodHlwZW9mIHQgIT0gJ251bWJlcicgfHwgaXNOYU4odCkgfHwgdCA8IDAgfHwgdCA+IDEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RocmVzaG9sZCBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMSBpbmNsdXNpdmVseScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ICE9PSBhW2kgLSAxXTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgXG4gICAgXG4gICAgLyoqXG4gICAgICogQWNjZXB0cyB0aGUgcm9vdE1hcmdpbiB2YWx1ZSBmcm9tIHRoZSB1c2VyIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAgICogYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGZvdXIgbWFyZ2luIHZhbHVlcyBhcyBhbiBvYmplY3QgY29udGFpbmluZ1xuICAgICAqIHRoZSB2YWx1ZSBhbmQgdW5pdCBwcm9wZXJ0aWVzLiBJZiBhbnkgb2YgdGhlIHZhbHVlcyBhcmUgbm90IHByb3Blcmx5XG4gICAgICogZm9ybWF0dGVkIG9yIHVzZSBhIHVuaXQgb3RoZXIgdGhhbiBweCBvciAlLCBhbmQgZXJyb3IgaXMgdGhyb3duLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfcm9vdE1hcmdpbiBBbiBvcHRpb25hbCByb290TWFyZ2luIHZhbHVlLFxuICAgICAqICAgICBkZWZhdWx0aW5nIHRvICcwcHgnLlxuICAgICAqIEByZXR1cm4ge0FycmF5PE9iamVjdD59IEFuIGFycmF5IG9mIG1hcmdpbiBvYmplY3RzIHdpdGggdGhlIGtleXNcbiAgICAgKiAgICAgdmFsdWUgYW5kIHVuaXQuXG4gICAgICovXG4gICAgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl9wYXJzZVJvb3RNYXJnaW4gPSBmdW5jdGlvbihvcHRfcm9vdE1hcmdpbikge1xuICAgICAgdmFyIG1hcmdpblN0cmluZyA9IG9wdF9yb290TWFyZ2luIHx8ICcwcHgnO1xuICAgICAgdmFyIG1hcmdpbnMgPSBtYXJnaW5TdHJpbmcuc3BsaXQoL1xccysvKS5tYXAoZnVuY3Rpb24obWFyZ2luKSB7XG4gICAgICAgIHZhciBwYXJ0cyA9IC9eKC0/XFxkKlxcLj9cXGQrKShweHwlKSQvLmV4ZWMobWFyZ2luKTtcbiAgICAgICAgaWYgKCFwYXJ0cykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncm9vdE1hcmdpbiBtdXN0IGJlIHNwZWNpZmllZCBpbiBwaXhlbHMgb3IgcGVyY2VudCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7dmFsdWU6IHBhcnNlRmxvYXQocGFydHNbMV0pLCB1bml0OiBwYXJ0c1syXX07XG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vIEhhbmRsZXMgc2hvcnRoYW5kLlxuICAgICAgbWFyZ2luc1sxXSA9IG1hcmdpbnNbMV0gfHwgbWFyZ2luc1swXTtcbiAgICAgIG1hcmdpbnNbMl0gPSBtYXJnaW5zWzJdIHx8IG1hcmdpbnNbMF07XG4gICAgICBtYXJnaW5zWzNdID0gbWFyZ2luc1szXSB8fCBtYXJnaW5zWzFdO1xuICAgIFxuICAgICAgcmV0dXJuIG1hcmdpbnM7XG4gICAgfTtcbiAgICBcbiAgICBcbiAgICAvKipcbiAgICAgKiBTdGFydHMgcG9sbGluZyBmb3IgaW50ZXJzZWN0aW9uIGNoYW5nZXMgaWYgdGhlIHBvbGxpbmcgaXMgbm90IGFscmVhZHlcbiAgICAgKiBoYXBwZW5pbmcsIGFuZCBpZiB0aGUgcGFnZSdzIHZpc2liaWxpdHkgc3RhdGUgaXMgdmlzaWJsZS5cbiAgICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX21vbml0b3JJbnRlcnNlY3Rpb25zID0gZnVuY3Rpb24oZG9jKSB7XG4gICAgICB2YXIgd2luID0gZG9jLmRlZmF1bHRWaWV3O1xuICAgICAgaWYgKCF3aW4pIHtcbiAgICAgICAgLy8gQWxyZWFkeSBkZXN0cm95ZWQuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9tb25pdG9yaW5nRG9jdW1lbnRzLmluZGV4T2YoZG9jKSAhPSAtMSkge1xuICAgICAgICAvLyBBbHJlYWR5IG1vbml0b3JpbmcuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICBcbiAgICAgIC8vIFByaXZhdGUgc3RhdGUgZm9yIG1vbml0b3JpbmcuXG4gICAgICB2YXIgY2FsbGJhY2sgPSB0aGlzLl9jaGVja0ZvckludGVyc2VjdGlvbnM7XG4gICAgICB2YXIgbW9uaXRvcmluZ0ludGVydmFsID0gbnVsbDtcbiAgICAgIHZhciBkb21PYnNlcnZlciA9IG51bGw7XG4gICAgXG4gICAgICAvLyBJZiBhIHBvbGwgaW50ZXJ2YWwgaXMgc2V0LCB1c2UgcG9sbGluZyBpbnN0ZWFkIG9mIGxpc3RlbmluZyB0b1xuICAgICAgLy8gcmVzaXplIGFuZCBzY3JvbGwgZXZlbnRzIG9yIERPTSBtdXRhdGlvbnMuXG4gICAgICBpZiAodGhpcy5QT0xMX0lOVEVSVkFMKSB7XG4gICAgICAgIG1vbml0b3JpbmdJbnRlcnZhbCA9IHdpbi5zZXRJbnRlcnZhbChjYWxsYmFjaywgdGhpcy5QT0xMX0lOVEVSVkFMKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZEV2ZW50KHdpbiwgJ3Jlc2l6ZScsIGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgYWRkRXZlbnQoZG9jLCAnc2Nyb2xsJywgY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICBpZiAodGhpcy5VU0VfTVVUQVRJT05fT0JTRVJWRVIgJiYgJ011dGF0aW9uT2JzZXJ2ZXInIGluIHdpbikge1xuICAgICAgICAgIGRvbU9ic2VydmVyID0gbmV3IHdpbi5NdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrKTtcbiAgICAgICAgICBkb21PYnNlcnZlci5vYnNlcnZlKGRvYywge1xuICAgICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXG4gICAgICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBcbiAgICAgIHRoaXMuX21vbml0b3JpbmdEb2N1bWVudHMucHVzaChkb2MpO1xuICAgICAgdGhpcy5fbW9uaXRvcmluZ1Vuc3Vic2NyaWJlcy5wdXNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBHZXQgdGhlIHdpbmRvdyBvYmplY3QgYWdhaW4uIFdoZW4gYSBmcmllbmRseSBpZnJhbWUgaXMgZGVzdHJveWVkLCBpdFxuICAgICAgICAvLyB3aWxsIGJlIG51bGwuXG4gICAgICAgIHZhciB3aW4gPSBkb2MuZGVmYXVsdFZpZXc7XG4gICAgXG4gICAgICAgIGlmICh3aW4pIHtcbiAgICAgICAgICBpZiAobW9uaXRvcmluZ0ludGVydmFsKSB7XG4gICAgICAgICAgICB3aW4uY2xlYXJJbnRlcnZhbChtb25pdG9yaW5nSW50ZXJ2YWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZW1vdmVFdmVudCh3aW4sICdyZXNpemUnLCBjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmVtb3ZlRXZlbnQoZG9jLCAnc2Nyb2xsJywgY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICBpZiAoZG9tT2JzZXJ2ZXIpIHtcbiAgICAgICAgICBkb21PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy8gQWxzbyBtb25pdG9yIHRoZSBwYXJlbnQuXG4gICAgICBpZiAoZG9jICE9ICh0aGlzLnJvb3QgJiYgdGhpcy5yb290Lm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQpKSB7XG4gICAgICAgIHZhciBmcmFtZSA9IGdldEZyYW1lRWxlbWVudChkb2MpO1xuICAgICAgICBpZiAoZnJhbWUpIHtcbiAgICAgICAgICB0aGlzLl9tb25pdG9ySW50ZXJzZWN0aW9ucyhmcmFtZS5vd25lckRvY3VtZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgXG4gICAgLyoqXG4gICAgICogU3RvcHMgcG9sbGluZyBmb3IgaW50ZXJzZWN0aW9uIGNoYW5nZXMuXG4gICAgICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl91bm1vbml0b3JJbnRlcnNlY3Rpb25zID0gZnVuY3Rpb24oZG9jKSB7XG4gICAgICB2YXIgaW5kZXggPSB0aGlzLl9tb25pdG9yaW5nRG9jdW1lbnRzLmluZGV4T2YoZG9jKTtcbiAgICAgIGlmIChpbmRleCA9PSAtMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgXG4gICAgICB2YXIgcm9vdERvYyA9ICh0aGlzLnJvb3QgJiYgdGhpcy5yb290Lm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQpO1xuICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgYW55IGRlcGVuZGVudCB0YXJnZXRzIGFyZSBzdGlsbCByZW1haW5pbmcuXG4gICAgICB2YXIgaGFzRGVwZW5kZW50VGFyZ2V0cyA9XG4gICAgICAgICAgdGhpcy5fb2JzZXJ2YXRpb25UYXJnZXRzLnNvbWUoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgdmFyIGl0ZW1Eb2MgPSBpdGVtLmVsZW1lbnQub3duZXJEb2N1bWVudDtcbiAgICAgICAgICAgIC8vIFRhcmdldCBpcyBpbiB0aGlzIGNvbnRleHQuXG4gICAgICAgICAgICBpZiAoaXRlbURvYyA9PSBkb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUYXJnZXQgaXMgbmVzdGVkIGluIHRoaXMgY29udGV4dC5cbiAgICAgICAgICAgIHdoaWxlIChpdGVtRG9jICYmIGl0ZW1Eb2MgIT0gcm9vdERvYykge1xuICAgICAgICAgICAgICB2YXIgZnJhbWUgPSBnZXRGcmFtZUVsZW1lbnQoaXRlbURvYyk7XG4gICAgICAgICAgICAgIGl0ZW1Eb2MgPSBmcmFtZSAmJiBmcmFtZS5vd25lckRvY3VtZW50O1xuICAgICAgICAgICAgICBpZiAoaXRlbURvYyA9PSBkb2MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH0pO1xuICAgICAgaWYgKGhhc0RlcGVuZGVudFRhcmdldHMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIFxuICAgICAgLy8gVW5zdWJzY3JpYmUuXG4gICAgICB2YXIgdW5zdWJzY3JpYmUgPSB0aGlzLl9tb25pdG9yaW5nVW5zdWJzY3JpYmVzW2luZGV4XTtcbiAgICAgIHRoaXMuX21vbml0b3JpbmdEb2N1bWVudHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIHRoaXMuX21vbml0b3JpbmdVbnN1YnNjcmliZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgXG4gICAgICAvLyBBbHNvIHVubW9uaXRvciB0aGUgcGFyZW50LlxuICAgICAgaWYgKGRvYyAhPSByb290RG9jKSB7XG4gICAgICAgIHZhciBmcmFtZSA9IGdldEZyYW1lRWxlbWVudChkb2MpO1xuICAgICAgICBpZiAoZnJhbWUpIHtcbiAgICAgICAgICB0aGlzLl91bm1vbml0b3JJbnRlcnNlY3Rpb25zKGZyYW1lLm93bmVyRG9jdW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBcbiAgICAvKipcbiAgICAgKiBTdG9wcyBwb2xsaW5nIGZvciBpbnRlcnNlY3Rpb24gY2hhbmdlcy5cbiAgICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX3VubW9uaXRvckFsbEludGVyc2VjdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB1bnN1YnNjcmliZXMgPSB0aGlzLl9tb25pdG9yaW5nVW5zdWJzY3JpYmVzLnNsaWNlKDApO1xuICAgICAgdGhpcy5fbW9uaXRvcmluZ0RvY3VtZW50cy5sZW5ndGggPSAwO1xuICAgICAgdGhpcy5fbW9uaXRvcmluZ1Vuc3Vic2NyaWJlcy5sZW5ndGggPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bnN1YnNjcmliZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdW5zdWJzY3JpYmVzW2ldKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBcbiAgICAvKipcbiAgICAgKiBTY2FucyBlYWNoIG9ic2VydmF0aW9uIHRhcmdldCBmb3IgaW50ZXJzZWN0aW9uIGNoYW5nZXMgYW5kIGFkZHMgdGhlbVxuICAgICAqIHRvIHRoZSBpbnRlcm5hbCBlbnRyaWVzIHF1ZXVlLiBJZiBuZXcgZW50cmllcyBhcmUgZm91bmQsIGl0XG4gICAgICogc2NoZWR1bGVzIHRoZSBjYWxsYmFjayB0byBiZSBpbnZva2VkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl9jaGVja0ZvckludGVyc2VjdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByb290SXNJbkRvbSA9IHRoaXMuX3Jvb3RJc0luRG9tKCk7XG4gICAgICB2YXIgcm9vdFJlY3QgPSByb290SXNJbkRvbSA/IHRoaXMuX2dldFJvb3RSZWN0KCkgOiBnZXRFbXB0eVJlY3QoKTtcbiAgICBcbiAgICAgIHRoaXMuX29ic2VydmF0aW9uVGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IGl0ZW0uZWxlbWVudDtcbiAgICAgICAgdmFyIHRhcmdldFJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3QodGFyZ2V0KTtcbiAgICAgICAgdmFyIHJvb3RDb250YWluc1RhcmdldCA9IHRoaXMuX3Jvb3RDb250YWluc1RhcmdldCh0YXJnZXQpO1xuICAgICAgICB2YXIgb2xkRW50cnkgPSBpdGVtLmVudHJ5O1xuICAgICAgICB2YXIgaW50ZXJzZWN0aW9uUmVjdCA9IHJvb3RJc0luRG9tICYmIHJvb3RDb250YWluc1RhcmdldCAmJlxuICAgICAgICAgICAgdGhpcy5fY29tcHV0ZVRhcmdldEFuZFJvb3RJbnRlcnNlY3Rpb24odGFyZ2V0LCB0YXJnZXRSZWN0LCByb290UmVjdCk7XG4gICAgXG4gICAgICAgIHZhciBuZXdFbnRyeSA9IGl0ZW0uZW50cnkgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeSh7XG4gICAgICAgICAgdGltZTogbm93KCksXG4gICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgICAgYm91bmRpbmdDbGllbnRSZWN0OiB0YXJnZXRSZWN0LFxuICAgICAgICAgIHJvb3RCb3VuZHM6IHJvb3RSZWN0LFxuICAgICAgICAgIGludGVyc2VjdGlvblJlY3Q6IGludGVyc2VjdGlvblJlY3RcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIGlmICghb2xkRW50cnkpIHtcbiAgICAgICAgICB0aGlzLl9xdWV1ZWRFbnRyaWVzLnB1c2gobmV3RW50cnkpO1xuICAgICAgICB9IGVsc2UgaWYgKHJvb3RJc0luRG9tICYmIHJvb3RDb250YWluc1RhcmdldCkge1xuICAgICAgICAgIC8vIElmIHRoZSBuZXcgZW50cnkgaW50ZXJzZWN0aW9uIHJhdGlvIGhhcyBjcm9zc2VkIGFueSBvZiB0aGVcbiAgICAgICAgICAvLyB0aHJlc2hvbGRzLCBhZGQgYSBuZXcgZW50cnkuXG4gICAgICAgICAgaWYgKHRoaXMuX2hhc0Nyb3NzZWRUaHJlc2hvbGQob2xkRW50cnksIG5ld0VudHJ5KSkge1xuICAgICAgICAgICAgdGhpcy5fcXVldWVkRW50cmllcy5wdXNoKG5ld0VudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhlIHJvb3QgaXMgbm90IGluIHRoZSBET00gb3IgdGFyZ2V0IGlzIG5vdCBjb250YWluZWQgd2l0aGluXG4gICAgICAgICAgLy8gcm9vdCBidXQgdGhlIHByZXZpb3VzIGVudHJ5IGZvciB0aGlzIHRhcmdldCBoYWQgYW4gaW50ZXJzZWN0aW9uLFxuICAgICAgICAgIC8vIGFkZCBhIG5ldyByZWNvcmQgaW5kaWNhdGluZyByZW1vdmFsLlxuICAgICAgICAgIGlmIChvbGRFbnRyeSAmJiBvbGRFbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgICAgdGhpcy5fcXVldWVkRW50cmllcy5wdXNoKG5ld0VudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIFxuICAgICAgaWYgKHRoaXMuX3F1ZXVlZEVudHJpZXMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrKHRoaXMudGFrZVJlY29yZHMoKSwgdGhpcyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBcbiAgICAvKipcbiAgICAgKiBBY2NlcHRzIGEgdGFyZ2V0IGFuZCByb290IHJlY3QgY29tcHV0ZXMgdGhlIGludGVyc2VjdGlvbiBiZXR3ZWVuIHRoZW5cbiAgICAgKiBmb2xsb3dpbmcgdGhlIGFsZ29yaXRobSBpbiB0aGUgc3BlYy5cbiAgICAgKiBUT0RPKHBoaWxpcHdhbHRvbik6IGF0IHRoaXMgdGltZSBjbGlwLXBhdGggaXMgbm90IGNvbnNpZGVyZWQuXG4gICAgICogaHR0cHM6Ly93M2MuZ2l0aHViLmlvL0ludGVyc2VjdGlvbk9ic2VydmVyLyNjYWxjdWxhdGUtaW50ZXJzZWN0aW9uLXJlY3QtYWxnb1xuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IFRoZSB0YXJnZXQgRE9NIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0UmVjdCBUaGUgYm91bmRpbmcgcmVjdCBvZiB0aGUgdGFyZ2V0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByb290UmVjdCBUaGUgYm91bmRpbmcgcmVjdCBvZiB0aGUgcm9vdCBhZnRlciBiZWluZ1xuICAgICAqICAgICBleHBhbmRlZCBieSB0aGUgcm9vdE1hcmdpbiB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHs/T2JqZWN0fSBUaGUgZmluYWwgaW50ZXJzZWN0aW9uIHJlY3Qgb2JqZWN0IG9yIHVuZGVmaW5lZCBpZiBub1xuICAgICAqICAgICBpbnRlcnNlY3Rpb24gaXMgZm91bmQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX2NvbXB1dGVUYXJnZXRBbmRSb290SW50ZXJzZWN0aW9uID1cbiAgICAgICAgZnVuY3Rpb24odGFyZ2V0LCB0YXJnZXRSZWN0LCByb290UmVjdCkge1xuICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaXNuJ3QgZGlzcGxheWVkLCBhbiBpbnRlcnNlY3Rpb24gY2FuJ3QgaGFwcGVuLlxuICAgICAgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCkuZGlzcGxheSA9PSAnbm9uZScpIHJldHVybjtcbiAgICBcbiAgICAgIHZhciBpbnRlcnNlY3Rpb25SZWN0ID0gdGFyZ2V0UmVjdDtcbiAgICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnROb2RlKHRhcmdldCk7XG4gICAgICB2YXIgYXRSb290ID0gZmFsc2U7XG4gICAgXG4gICAgICB3aGlsZSAoIWF0Um9vdCAmJiBwYXJlbnQpIHtcbiAgICAgICAgdmFyIHBhcmVudFJlY3QgPSBudWxsO1xuICAgICAgICB2YXIgcGFyZW50Q29tcHV0ZWRTdHlsZSA9IHBhcmVudC5ub2RlVHlwZSA9PSAxID9cbiAgICAgICAgICAgIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBhcmVudCkgOiB7fTtcbiAgICBcbiAgICAgICAgLy8gSWYgdGhlIHBhcmVudCBpc24ndCBkaXNwbGF5ZWQsIGFuIGludGVyc2VjdGlvbiBjYW4ndCBoYXBwZW4uXG4gICAgICAgIGlmIChwYXJlbnRDb21wdXRlZFN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAgICAgaWYgKHBhcmVudCA9PSB0aGlzLnJvb3QgfHwgcGFyZW50Lm5vZGVUeXBlID09IC8qIERPQ1VNRU5UICovIDkpIHtcbiAgICAgICAgICBhdFJvb3QgPSB0cnVlO1xuICAgICAgICAgIGlmIChwYXJlbnQgPT0gdGhpcy5yb290IHx8IHBhcmVudCA9PSBkb2N1bWVudCkge1xuICAgICAgICAgICAgcGFyZW50UmVjdCA9IHJvb3RSZWN0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGEgZnJhbWUgdGhhdCBjYW4gYmUgbmF2aWdhdGVkIHRvLlxuICAgICAgICAgICAgdmFyIGZyYW1lID0gZ2V0UGFyZW50Tm9kZShwYXJlbnQpO1xuICAgICAgICAgICAgdmFyIGZyYW1lUmVjdCA9IGZyYW1lICYmIGdldEJvdW5kaW5nQ2xpZW50UmVjdChmcmFtZSk7XG4gICAgICAgICAgICB2YXIgZnJhbWVJbnRlcnNlY3QgPVxuICAgICAgICAgICAgICAgIGZyYW1lICYmXG4gICAgICAgICAgICAgICAgdGhpcy5fY29tcHV0ZVRhcmdldEFuZFJvb3RJbnRlcnNlY3Rpb24oZnJhbWUsIGZyYW1lUmVjdCwgcm9vdFJlY3QpO1xuICAgICAgICAgICAgaWYgKGZyYW1lUmVjdCAmJiBmcmFtZUludGVyc2VjdCkge1xuICAgICAgICAgICAgICBwYXJlbnQgPSBmcmFtZTtcbiAgICAgICAgICAgICAgcGFyZW50UmVjdCA9IGNvbnZlcnRGcm9tUGFyZW50UmVjdChmcmFtZVJlY3QsIGZyYW1lSW50ZXJzZWN0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHBhcmVudCA9IG51bGw7XG4gICAgICAgICAgICAgIGludGVyc2VjdGlvblJlY3QgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBub24tdmlzaWJsZSBvdmVyZmxvdywgYW5kIGl0J3Mgbm90IHRoZSA8Ym9keT5cbiAgICAgICAgICAvLyBvciA8aHRtbD4gZWxlbWVudCwgdXBkYXRlIHRoZSBpbnRlcnNlY3Rpb24gcmVjdC5cbiAgICAgICAgICAvLyBOb3RlOiA8Ym9keT4gYW5kIDxodG1sPiBjYW5ub3QgYmUgY2xpcHBlZCB0byBhIHJlY3QgdGhhdCdzIG5vdCBhbHNvXG4gICAgICAgICAgLy8gdGhlIGRvY3VtZW50IHJlY3QsIHNvIG5vIG5lZWQgdG8gY29tcHV0ZSBhIG5ldyBpbnRlcnNlY3Rpb24uXG4gICAgICAgICAgdmFyIGRvYyA9IHBhcmVudC5vd25lckRvY3VtZW50O1xuICAgICAgICAgIGlmIChwYXJlbnQgIT0gZG9jLmJvZHkgJiZcbiAgICAgICAgICAgICAgcGFyZW50ICE9IGRvYy5kb2N1bWVudEVsZW1lbnQgJiZcbiAgICAgICAgICAgICAgcGFyZW50Q29tcHV0ZWRTdHlsZS5vdmVyZmxvdyAhPSAndmlzaWJsZScpIHtcbiAgICAgICAgICAgIHBhcmVudFJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3QocGFyZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gSWYgZWl0aGVyIG9mIHRoZSBhYm92ZSBjb25kaXRpb25hbHMgc2V0IGEgbmV3IHBhcmVudFJlY3QsXG4gICAgICAgIC8vIGNhbGN1bGF0ZSBuZXcgaW50ZXJzZWN0aW9uIGRhdGEuXG4gICAgICAgIGlmIChwYXJlbnRSZWN0KSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW9uUmVjdCA9IGNvbXB1dGVSZWN0SW50ZXJzZWN0aW9uKHBhcmVudFJlY3QsIGludGVyc2VjdGlvblJlY3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW50ZXJzZWN0aW9uUmVjdCkgYnJlYWs7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudCAmJiBnZXRQYXJlbnROb2RlKHBhcmVudCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaW50ZXJzZWN0aW9uUmVjdDtcbiAgICB9O1xuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJvb3QgcmVjdCBhZnRlciBiZWluZyBleHBhbmRlZCBieSB0aGUgcm9vdE1hcmdpbiB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBleHBhbmRlZCByb290IHJlY3QuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX2dldFJvb3RSZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcm9vdFJlY3Q7XG4gICAgICBpZiAodGhpcy5yb290KSB7XG4gICAgICAgIHJvb3RSZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KHRoaXMucm9vdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVc2UgPGh0bWw+Lzxib2R5PiBpbnN0ZWFkIG9mIHdpbmRvdyBzaW5jZSBzY3JvbGwgYmFycyBhZmZlY3Qgc2l6ZS5cbiAgICAgICAgdmFyIGh0bWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgcm9vdFJlY3QgPSB7XG4gICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgcmlnaHQ6IGh0bWwuY2xpZW50V2lkdGggfHwgYm9keS5jbGllbnRXaWR0aCxcbiAgICAgICAgICB3aWR0aDogaHRtbC5jbGllbnRXaWR0aCB8fCBib2R5LmNsaWVudFdpZHRoLFxuICAgICAgICAgIGJvdHRvbTogaHRtbC5jbGllbnRIZWlnaHQgfHwgYm9keS5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgaGVpZ2h0OiBodG1sLmNsaWVudEhlaWdodCB8fCBib2R5LmNsaWVudEhlaWdodFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZFJlY3RCeVJvb3RNYXJnaW4ocm9vdFJlY3QpO1xuICAgIH07XG4gICAgXG4gICAgXG4gICAgLyoqXG4gICAgICogQWNjZXB0cyBhIHJlY3QgYW5kIGV4cGFuZHMgaXQgYnkgdGhlIHJvb3RNYXJnaW4gdmFsdWUuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlY3QgVGhlIHJlY3Qgb2JqZWN0IHRvIGV4cGFuZC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBleHBhbmRlZCByZWN0LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl9leHBhbmRSZWN0QnlSb290TWFyZ2luID0gZnVuY3Rpb24ocmVjdCkge1xuICAgICAgdmFyIG1hcmdpbnMgPSB0aGlzLl9yb290TWFyZ2luVmFsdWVzLm1hcChmdW5jdGlvbihtYXJnaW4sIGkpIHtcbiAgICAgICAgcmV0dXJuIG1hcmdpbi51bml0ID09ICdweCcgPyBtYXJnaW4udmFsdWUgOlxuICAgICAgICAgICAgbWFyZ2luLnZhbHVlICogKGkgJSAyID8gcmVjdC53aWR0aCA6IHJlY3QuaGVpZ2h0KSAvIDEwMDtcbiAgICAgIH0pO1xuICAgICAgdmFyIG5ld1JlY3QgPSB7XG4gICAgICAgIHRvcDogcmVjdC50b3AgLSBtYXJnaW5zWzBdLFxuICAgICAgICByaWdodDogcmVjdC5yaWdodCArIG1hcmdpbnNbMV0sXG4gICAgICAgIGJvdHRvbTogcmVjdC5ib3R0b20gKyBtYXJnaW5zWzJdLFxuICAgICAgICBsZWZ0OiByZWN0LmxlZnQgLSBtYXJnaW5zWzNdXG4gICAgICB9O1xuICAgICAgbmV3UmVjdC53aWR0aCA9IG5ld1JlY3QucmlnaHQgLSBuZXdSZWN0LmxlZnQ7XG4gICAgICBuZXdSZWN0LmhlaWdodCA9IG5ld1JlY3QuYm90dG9tIC0gbmV3UmVjdC50b3A7XG4gICAgXG4gICAgICByZXR1cm4gbmV3UmVjdDtcbiAgICB9O1xuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIEFjY2VwdHMgYW4gb2xkIGFuZCBuZXcgZW50cnkgYW5kIHJldHVybnMgdHJ1ZSBpZiBhdCBsZWFzdCBvbmUgb2YgdGhlXG4gICAgICogdGhyZXNob2xkIHZhbHVlcyBoYXMgYmVlbiBjcm9zc2VkLlxuICAgICAqIEBwYXJhbSB7P0ludGVyc2VjdGlvbk9ic2VydmVyRW50cnl9IG9sZEVudHJ5IFRoZSBwcmV2aW91cyBlbnRyeSBmb3IgYVxuICAgICAqICAgIHBhcnRpY3VsYXIgdGFyZ2V0IGVsZW1lbnQgb3IgbnVsbCBpZiBubyBwcmV2aW91cyBlbnRyeSBleGlzdHMuXG4gICAgICogQHBhcmFtIHtJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5fSBuZXdFbnRyeSBUaGUgY3VycmVudCBlbnRyeSBmb3IgYVxuICAgICAqICAgIHBhcnRpY3VsYXIgdGFyZ2V0IGVsZW1lbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGEgYW55IHRocmVzaG9sZCBoYXMgYmVlbiBjcm9zc2VkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl9oYXNDcm9zc2VkVGhyZXNob2xkID1cbiAgICAgICAgZnVuY3Rpb24ob2xkRW50cnksIG5ld0VudHJ5KSB7XG4gICAgXG4gICAgICAvLyBUbyBtYWtlIGNvbXBhcmluZyBlYXNpZXIsIGFuIGVudHJ5IHRoYXQgaGFzIGEgcmF0aW8gb2YgMFxuICAgICAgLy8gYnV0IGRvZXMgbm90IGFjdHVhbGx5IGludGVyc2VjdCBpcyBnaXZlbiBhIHZhbHVlIG9mIC0xXG4gICAgICB2YXIgb2xkUmF0aW8gPSBvbGRFbnRyeSAmJiBvbGRFbnRyeS5pc0ludGVyc2VjdGluZyA/XG4gICAgICAgICAgb2xkRW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gfHwgMCA6IC0xO1xuICAgICAgdmFyIG5ld1JhdGlvID0gbmV3RW50cnkuaXNJbnRlcnNlY3RpbmcgP1xuICAgICAgICAgIG5ld0VudHJ5LmludGVyc2VjdGlvblJhdGlvIHx8IDAgOiAtMTtcbiAgICBcbiAgICAgIC8vIElnbm9yZSB1bmNoYW5nZWQgcmF0aW9zXG4gICAgICBpZiAob2xkUmF0aW8gPT09IG5ld1JhdGlvKSByZXR1cm47XG4gICAgXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGhyZXNob2xkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdGhyZXNob2xkID0gdGhpcy50aHJlc2hvbGRzW2ldO1xuICAgIFxuICAgICAgICAvLyBSZXR1cm4gdHJ1ZSBpZiBhbiBlbnRyeSBtYXRjaGVzIGEgdGhyZXNob2xkIG9yIGlmIHRoZSBuZXcgcmF0aW9cbiAgICAgICAgLy8gYW5kIHRoZSBvbGQgcmF0aW8gYXJlIG9uIHRoZSBvcHBvc2l0ZSBzaWRlcyBvZiBhIHRocmVzaG9sZC5cbiAgICAgICAgaWYgKHRocmVzaG9sZCA9PSBvbGRSYXRpbyB8fCB0aHJlc2hvbGQgPT0gbmV3UmF0aW8gfHxcbiAgICAgICAgICAgIHRocmVzaG9sZCA8IG9sZFJhdGlvICE9PSB0aHJlc2hvbGQgPCBuZXdSYXRpbykge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSByb290IGVsZW1lbnQgaXMgYW4gZWxlbWVudCBhbmQgaXMgaW4gdGhlIERPTS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSByb290IGVsZW1lbnQgaXMgYW4gZWxlbWVudCBhbmQgaXMgaW4gdGhlIERPTS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEludGVyc2VjdGlvbk9ic2VydmVyLnByb3RvdHlwZS5fcm9vdElzSW5Eb20gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5yb290IHx8IGNvbnRhaW5zRGVlcChkb2N1bWVudCwgdGhpcy5yb290KTtcbiAgICB9O1xuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHRhcmdldCBlbGVtZW50IGlzIGEgY2hpbGQgb2Ygcm9vdC5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCBUaGUgdGFyZ2V0IGVsZW1lbnQgdG8gY2hlY2suXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgYSBjaGlsZCBvZiByb290LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl9yb290Q29udGFpbnNUYXJnZXQgPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgIHJldHVybiBjb250YWluc0RlZXAodGhpcy5yb290IHx8IGRvY3VtZW50LCB0YXJnZXQpICYmXG4gICAgICAgICghdGhpcy5yb290IHx8IHRoaXMucm9vdC5vd25lckRvY3VtZW50ID09IHRhcmdldC5vd25lckRvY3VtZW50KTtcbiAgICB9O1xuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIGluc3RhbmNlIHRvIHRoZSBnbG9iYWwgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgcmVnaXN0cnkgaWYgaXQgaXNuJ3RcbiAgICAgKiBhbHJlYWR5IHByZXNlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbnRlcnNlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUuX3JlZ2lzdGVySW5zdGFuY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChyZWdpc3RyeS5pbmRleE9mKHRoaXMpIDwgMCkge1xuICAgICAgICByZWdpc3RyeS5wdXNoKHRoaXMpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgaW5zdGFuY2UgZnJvbSB0aGUgZ2xvYmFsIEludGVyc2VjdGlvbk9ic2VydmVyIHJlZ2lzdHJ5LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIucHJvdG90eXBlLl91bnJlZ2lzdGVySW5zdGFuY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbmRleCA9IHJlZ2lzdHJ5LmluZGV4T2YodGhpcyk7XG4gICAgICBpZiAoaW5kZXggIT0gLTEpIHJlZ2lzdHJ5LnNwbGljZShpbmRleCwgMSk7XG4gICAgfTtcbiAgICBcbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHQgb2YgdGhlIHBlcmZvcm1hbmNlLm5vdygpIG1ldGhvZCBvciBudWxsIGluIGJyb3dzZXJzXG4gICAgICogdGhhdCBkb24ndCBzdXBwb3J0IHRoZSBBUEkuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgZWxhcHNlZCB0aW1lIHNpbmNlIHRoZSBwYWdlIHdhcyByZXF1ZXN0ZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbm93KCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5wZXJmb3JtYW5jZSAmJiBwZXJmb3JtYW5jZS5ub3cgJiYgcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIFRocm90dGxlcyBhIGZ1bmN0aW9uIGFuZCBkZWxheXMgaXRzIGV4ZWN1dGlvbiwgc28gaXQncyBvbmx5IGNhbGxlZCBhdCBtb3N0XG4gICAgICogb25jZSB3aXRoaW4gYSBnaXZlbiB0aW1lIHBlcmlvZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gdGhyb3R0bGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXQgVGhlIGFtb3VudCBvZiB0aW1lIHRoYXQgbXVzdCBwYXNzIGJlZm9yZSB0aGVcbiAgICAgKiAgICAgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBhZ2Fpbi5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIHRocm90dGxlZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0aHJvdHRsZShmbiwgdGltZW91dCkge1xuICAgICAgdmFyIHRpbWVyID0gbnVsbDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGltZXIpIHtcbiAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgdGltZXIgPSBudWxsO1xuICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGV2ZW50IGhhbmRsZXIgdG8gYSBET00gbm9kZSBlbnN1cmluZyBjcm9zcy1icm93c2VyIGNvbXBhdGliaWxpdHkuXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBET00gbm9kZSB0byBhZGQgdGhlIGV2ZW50IGhhbmRsZXIgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBldmVudCBoYW5kbGVyIHRvIGFkZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdF91c2VDYXB0dXJlIE9wdGlvbmFsbHkgYWRkcyB0aGUgZXZlbiB0byB0aGUgY2FwdHVyZVxuICAgICAqICAgICBwaGFzZS4gTm90ZTogdGhpcyBvbmx5IHdvcmtzIGluIG1vZGVybiBicm93c2Vycy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRFdmVudChub2RlLCBldmVudCwgZm4sIG9wdF91c2VDYXB0dXJlKSB7XG4gICAgICBpZiAodHlwZW9mIG5vZGUuYWRkRXZlbnRMaXN0ZW5lciA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZm4sIG9wdF91c2VDYXB0dXJlIHx8IGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHR5cGVvZiBub2RlLmF0dGFjaEV2ZW50ID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgbm9kZS5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGZuKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHByZXZpb3VzbHkgYWRkZWQgZXZlbnQgaGFuZGxlciBmcm9tIGEgRE9NIG5vZGUuXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBET00gbm9kZSB0byByZW1vdmUgdGhlIGV2ZW50IGhhbmRsZXIgZnJvbS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGV2ZW50IGhhbmRsZXIgdG8gcmVtb3ZlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0X3VzZUNhcHR1cmUgSWYgdGhlIGV2ZW50IGhhbmRsZXIgd2FzIGFkZGVkIHdpdGggdGhpc1xuICAgICAqICAgICBmbGFnIHNldCB0byB0cnVlLCBpdCBzaG91bGQgYmUgc2V0IHRvIHRydWUgaGVyZSBpbiBvcmRlciB0byByZW1vdmUgaXQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlRXZlbnQobm9kZSwgZXZlbnQsIGZuLCBvcHRfdXNlQ2FwdHVyZSkge1xuICAgICAgaWYgKHR5cGVvZiBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGZuLCBvcHRfdXNlQ2FwdHVyZSB8fCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0eXBlb2Ygbm9kZS5kZXRhdGNoRXZlbnQgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBub2RlLmRldGF0Y2hFdmVudCgnb24nICsgZXZlbnQsIGZuKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaW50ZXJzZWN0aW9uIGJldHdlZW4gdHdvIHJlY3Qgb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVjdDEgVGhlIGZpcnN0IHJlY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlY3QyIFRoZSBzZWNvbmQgcmVjdC5cbiAgICAgKiBAcmV0dXJuIHs/T2JqZWN0fSBUaGUgaW50ZXJzZWN0aW9uIHJlY3Qgb3IgdW5kZWZpbmVkIGlmIG5vIGludGVyc2VjdGlvblxuICAgICAqICAgICBpcyBmb3VuZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wdXRlUmVjdEludGVyc2VjdGlvbihyZWN0MSwgcmVjdDIpIHtcbiAgICAgIHZhciB0b3AgPSBNYXRoLm1heChyZWN0MS50b3AsIHJlY3QyLnRvcCk7XG4gICAgICB2YXIgYm90dG9tID0gTWF0aC5taW4ocmVjdDEuYm90dG9tLCByZWN0Mi5ib3R0b20pO1xuICAgICAgdmFyIGxlZnQgPSBNYXRoLm1heChyZWN0MS5sZWZ0LCByZWN0Mi5sZWZ0KTtcbiAgICAgIHZhciByaWdodCA9IE1hdGgubWluKHJlY3QxLnJpZ2h0LCByZWN0Mi5yaWdodCk7XG4gICAgICB2YXIgd2lkdGggPSByaWdodCAtIGxlZnQ7XG4gICAgICB2YXIgaGVpZ2h0ID0gYm90dG9tIC0gdG9wO1xuICAgIFxuICAgICAgcmV0dXJuICh3aWR0aCA+PSAwICYmIGhlaWdodCA+PSAwKSAmJiB7XG4gICAgICAgIHRvcDogdG9wLFxuICAgICAgICBib3R0b206IGJvdHRvbSxcbiAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgcmlnaHQ6IHJpZ2h0LFxuICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICB9IHx8IG51bGw7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIFNoaW1zIHRoZSBuYXRpdmUgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZvciBjb21wYXRpYmlsaXR5IHdpdGggb2xkZXIgSUUuXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbCBUaGUgZWxlbWVudCB3aG9zZSBib3VuZGluZyByZWN0IHRvIGdldC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSAocG9zc2libHkgc2hpbW1lZCkgcmVjdCBvZiB0aGUgZWxlbWVudC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWwpIHtcbiAgICAgIHZhciByZWN0O1xuICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIElnbm9yZSBXaW5kb3dzIDcgSUUxMSBcIlVuc3BlY2lmaWVkIGVycm9yXCJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3czYy9JbnRlcnNlY3Rpb25PYnNlcnZlci9wdWxsLzIwNVxuICAgICAgfVxuICAgIFxuICAgICAgaWYgKCFyZWN0KSByZXR1cm4gZ2V0RW1wdHlSZWN0KCk7XG4gICAgXG4gICAgICAvLyBPbGRlciBJRVxuICAgICAgaWYgKCEocmVjdC53aWR0aCAmJiByZWN0LmhlaWdodCkpIHtcbiAgICAgICAgcmVjdCA9IHtcbiAgICAgICAgICB0b3A6IHJlY3QudG9wLFxuICAgICAgICAgIHJpZ2h0OiByZWN0LnJpZ2h0LFxuICAgICAgICAgIGJvdHRvbTogcmVjdC5ib3R0b20sXG4gICAgICAgICAgbGVmdDogcmVjdC5sZWZ0LFxuICAgICAgICAgIHdpZHRoOiByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0LFxuICAgICAgICAgIGhlaWdodDogcmVjdC5ib3R0b20gLSByZWN0LnRvcFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZW1wdHkgcmVjdCBvYmplY3QuIEFuIGVtcHR5IHJlY3QgaXMgcmV0dXJuZWQgd2hlbiBhbiBlbGVtZW50XG4gICAgICogaXMgbm90IGluIHRoZSBET00uXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgZW1wdHkgcmVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRFbXB0eVJlY3QoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBoZWlnaHQ6IDBcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIEludmVydHMgdGhlIGludGVyc2VjdGlvbiBhbmQgYm91bmRpbmcgcmVjdCBmcm9tIHRoZSBwYXJlbnQgKGZyYW1lKSBCQ1IgdG9cbiAgICAgKiB0aGUgbG9jYWwgQkNSIHNwYWNlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJlbnRCb3VuZGluZ1JlY3QgVGhlIHBhcmVudCdzIGJvdW5kIGNsaWVudCByZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJlbnRJbnRlcnNlY3Rpb25SZWN0IFRoZSBwYXJlbnQncyBvd24gaW50ZXJzZWN0aW9uIHJlY3QuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgbG9jYWwgcm9vdCBib3VuZGluZyByZWN0IGZvciB0aGUgcGFyZW50J3MgY2hpbGRyZW4uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29udmVydEZyb21QYXJlbnRSZWN0KHBhcmVudEJvdW5kaW5nUmVjdCwgcGFyZW50SW50ZXJzZWN0aW9uUmVjdCkge1xuICAgICAgdmFyIHRvcCA9IHBhcmVudEludGVyc2VjdGlvblJlY3QudG9wIC0gcGFyZW50Qm91bmRpbmdSZWN0LnRvcDtcbiAgICAgIHZhciBsZWZ0ID0gcGFyZW50SW50ZXJzZWN0aW9uUmVjdC5sZWZ0IC0gcGFyZW50Qm91bmRpbmdSZWN0LmxlZnQ7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3A6IHRvcCxcbiAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgaGVpZ2h0OiBwYXJlbnRJbnRlcnNlY3Rpb25SZWN0LmhlaWdodCxcbiAgICAgICAgd2lkdGg6IHBhcmVudEludGVyc2VjdGlvblJlY3Qud2lkdGgsXG4gICAgICAgIGJvdHRvbTogdG9wICsgcGFyZW50SW50ZXJzZWN0aW9uUmVjdC5oZWlnaHQsXG4gICAgICAgIHJpZ2h0OiBsZWZ0ICsgcGFyZW50SW50ZXJzZWN0aW9uUmVjdC53aWR0aFxuICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRvIHNlZSBpZiBhIHBhcmVudCBlbGVtZW50IGNvbnRhaW5zIGEgY2hpbGQgZWxlbWVudCAoaW5jbHVkaW5nIGluc2lkZVxuICAgICAqIHNoYWRvdyBET00pLlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gcGFyZW50IFRoZSBwYXJlbnQgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge05vZGV9IGNoaWxkIFRoZSBjaGlsZCBlbGVtZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHBhcmVudCBub2RlIGNvbnRhaW5zIHRoZSBjaGlsZCBub2RlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbnRhaW5zRGVlcChwYXJlbnQsIGNoaWxkKSB7XG4gICAgICB2YXIgbm9kZSA9IGNoaWxkO1xuICAgICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUgPT0gcGFyZW50KSByZXR1cm4gdHJ1ZTtcbiAgICBcbiAgICAgICAgbm9kZSA9IGdldFBhcmVudE5vZGUobm9kZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHBhcmVudCBub2RlIG9mIGFuIGVsZW1lbnQgb3IgaXRzIGhvc3QgZWxlbWVudCBpZiB0aGUgcGFyZW50IG5vZGVcbiAgICAgKiBpcyBhIHNoYWRvdyByb290LlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgbm9kZSB3aG9zZSBwYXJlbnQgdG8gZ2V0LlxuICAgICAqIEByZXR1cm4ge05vZGV8bnVsbH0gVGhlIHBhcmVudCBub2RlIG9yIG51bGwgaWYgbm8gcGFyZW50IGV4aXN0cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRQYXJlbnROb2RlKG5vZGUpIHtcbiAgICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgXG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAvKiBET0NVTUVOVCAqLyA5ICYmIG5vZGUgIT0gZG9jdW1lbnQpIHtcbiAgICAgICAgLy8gSWYgdGhpcyBub2RlIGlzIGEgZG9jdW1lbnQgbm9kZSwgbG9vayBmb3IgdGhlIGVtYmVkZGluZyBmcmFtZS5cbiAgICAgICAgcmV0dXJuIGdldEZyYW1lRWxlbWVudChub2RlKTtcbiAgICAgIH1cbiAgICBcbiAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09IDExICYmIHBhcmVudC5ob3N0KSB7XG4gICAgICAgIC8vIElmIHRoZSBwYXJlbnQgaXMgYSBzaGFkb3cgcm9vdCwgcmV0dXJuIHRoZSBob3N0IGVsZW1lbnQuXG4gICAgICAgIHJldHVybiBwYXJlbnQuaG9zdDtcbiAgICAgIH1cbiAgICBcbiAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50LmFzc2lnbmVkU2xvdCkge1xuICAgICAgICAvLyBJZiB0aGUgcGFyZW50IGlzIGRpc3RyaWJ1dGVkIGluIGEgPHNsb3Q+LCByZXR1cm4gdGhlIHBhcmVudCBvZiBhIHNsb3QuXG4gICAgICAgIHJldHVybiBwYXJlbnQuYXNzaWduZWRTbG90LnBhcmVudE5vZGU7XG4gICAgICB9XG4gICAgXG4gICAgICByZXR1cm4gcGFyZW50O1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBlbWJlZGRpbmcgZnJhbWUgZWxlbWVudCwgaWYgYW55LlxuICAgICAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAgICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRGcmFtZUVsZW1lbnQoZG9jKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gZG9jLmRlZmF1bHRWaWV3ICYmIGRvYy5kZWZhdWx0Vmlldy5mcmFtZUVsZW1lbnQgfHwgbnVsbDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWdub3JlIHRoZSBlcnJvci5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIEV4cG9zZXMgdGhlIGNvbnN0cnVjdG9ycyBnbG9iYWxseS5cbiAgICB3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSBJbnRlcnNlY3Rpb25PYnNlcnZlcjtcbiAgICB3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeSA9IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnk7XG4gICAgXG4gICAgfSgpKTsiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJyZWdpc3RyeSIsIkludGVyc2VjdGlvbk9ic2VydmVyRW50cnkiLCJlbnRyeSIsInRoaXMiLCJ0aW1lIiwidGFyZ2V0Iiwicm9vdEJvdW5kcyIsImJvdW5kaW5nQ2xpZW50UmVjdCIsImludGVyc2VjdGlvblJlY3QiLCJnZXRFbXB0eVJlY3QiLCJpc0ludGVyc2VjdGluZyIsInRhcmdldFJlY3QiLCJ0YXJnZXRBcmVhIiwid2lkdGgiLCJoZWlnaHQiLCJpbnRlcnNlY3Rpb25BcmVhIiwiaW50ZXJzZWN0aW9uUmF0aW8iLCJOdW1iZXIiLCJ0b0ZpeGVkIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJjYWxsYmFjayIsIm9wdF9vcHRpb25zIiwiZm4iLCJ0aW1lb3V0IiwidGltZXIiLCJvcHRpb25zIiwiRXJyb3IiLCJyb290Iiwibm9kZVR5cGUiLCJfY2hlY2tGb3JJbnRlcnNlY3Rpb25zIiwiYmluZCIsIlRIUk9UVExFX1RJTUVPVVQiLCJzZXRUaW1lb3V0IiwiX2NhbGxiYWNrIiwiX29ic2VydmF0aW9uVGFyZ2V0cyIsIl9xdWV1ZWRFbnRyaWVzIiwiX3Jvb3RNYXJnaW5WYWx1ZXMiLCJfcGFyc2VSb290TWFyZ2luIiwicm9vdE1hcmdpbiIsInRocmVzaG9sZHMiLCJfaW5pdFRocmVzaG9sZHMiLCJ0aHJlc2hvbGQiLCJtYXAiLCJtYXJnaW4iLCJ2YWx1ZSIsInVuaXQiLCJqb2luIiwiX21vbml0b3JpbmdEb2N1bWVudHMiLCJfbW9uaXRvcmluZ1Vuc3Vic2NyaWJlcyIsImFkZEV2ZW50Iiwibm9kZSIsImV2ZW50Iiwib3B0X3VzZUNhcHR1cmUiLCJhZGRFdmVudExpc3RlbmVyIiwiYXR0YWNoRXZlbnQiLCJyZW1vdmVFdmVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZXRhdGNoRXZlbnQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJlbCIsInJlY3QiLCJlcnIiLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJjb250YWluc0RlZXAiLCJwYXJlbnQiLCJjaGlsZCIsImdldFBhcmVudE5vZGUiLCJwYXJlbnROb2RlIiwiZ2V0RnJhbWVFbGVtZW50IiwiaG9zdCIsImFzc2lnbmVkU2xvdCIsImRvYyIsImRlZmF1bHRWaWV3IiwiZnJhbWVFbGVtZW50IiwiZSIsIndpbmRvdyIsInByb3RvdHlwZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0IiwiUE9MTF9JTlRFUlZBTCIsIlVTRV9NVVRBVElPTl9PQlNFUlZFUiIsIm9ic2VydmUiLCJpc1RhcmdldEFscmVhZHlPYnNlcnZlZCIsInNvbWUiLCJpdGVtIiwiZWxlbWVudCIsIl9yZWdpc3Rlckluc3RhbmNlIiwicHVzaCIsIl9tb25pdG9ySW50ZXJzZWN0aW9ucyIsIm93bmVyRG9jdW1lbnQiLCJ1bm9ic2VydmUiLCJmaWx0ZXIiLCJfdW5tb25pdG9ySW50ZXJzZWN0aW9ucyIsImxlbmd0aCIsIl91bnJlZ2lzdGVySW5zdGFuY2UiLCJkaXNjb25uZWN0IiwiX3VubW9uaXRvckFsbEludGVyc2VjdGlvbnMiLCJ0YWtlUmVjb3JkcyIsInJlY29yZHMiLCJzbGljZSIsIm9wdF90aHJlc2hvbGQiLCJBcnJheSIsImlzQXJyYXkiLCJzb3J0IiwidCIsImkiLCJhIiwiaXNOYU4iLCJvcHRfcm9vdE1hcmdpbiIsIm1hcmdpbnMiLCJzcGxpdCIsInBhcnRzIiwiZXhlYyIsInBhcnNlRmxvYXQiLCJtb25pdG9yaW5nSW50ZXJ2YWwiLCJkb21PYnNlcnZlciIsIndpbiIsImluZGV4T2YiLCJzZXRJbnRlcnZhbCIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJhdHRyaWJ1dGVzIiwiY2hpbGRMaXN0IiwiY2hhcmFjdGVyRGF0YSIsInN1YnRyZWUiLCJjbGVhckludGVydmFsIiwiZnJhbWUiLCJyb290RG9jIiwidW5zdWJzY3JpYmUiLCJpbmRleCIsIml0ZW1Eb2MiLCJzcGxpY2UiLCJ1bnN1YnNjcmliZXMiLCJyb290SXNJbkRvbSIsIl9yb290SXNJbkRvbSIsInJvb3RSZWN0IiwiX2dldFJvb3RSZWN0IiwiZm9yRWFjaCIsInJvb3RDb250YWluc1RhcmdldCIsIl9yb290Q29udGFpbnNUYXJnZXQiLCJvbGRFbnRyeSIsIl9jb21wdXRlVGFyZ2V0QW5kUm9vdEludGVyc2VjdGlvbiIsIm5ld0VudHJ5IiwicGVyZm9ybWFuY2UiLCJub3ciLCJfaGFzQ3Jvc3NlZFRocmVzaG9sZCIsImdldENvbXB1dGVkU3R5bGUiLCJkaXNwbGF5IiwiYXRSb290IiwiZnJhbWVJbnRlcnNlY3QiLCJwYXJlbnRSZWN0IiwicGFyZW50Q29tcHV0ZWRTdHlsZSIsImZyYW1lUmVjdCIsInBhcmVudEJvdW5kaW5nUmVjdCIsImJvZHkiLCJkb2N1bWVudEVsZW1lbnQiLCJvdmVyZmxvdyIsInJlY3QxIiwicmVjdDIiLCJNYXRoIiwibWF4IiwibWluIiwiaHRtbCIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiX2V4cGFuZFJlY3RCeVJvb3RNYXJnaW4iLCJuZXdSZWN0Iiwib2xkUmF0aW8iLCJuZXdSYXRpbyJdLCJtYXBwaW5ncyI6IkNBUUMsd0JBSUcsSUEyQklBLEVBU0FDLEVBU0osU0FBU0MsRUFBMEJDLEdBQ2pDQyxLQUFLQyxLQUFPRixFQUFNRSxLQUNsQkQsS0FBS0UsT0FBU0gsRUFBTUcsT0FDcEJGLEtBQUtHLFdBQWFKLEVBQU1JLFdBQ3hCSCxLQUFLSSxtQkFBcUJMLEVBQU1LLG1CQUNoQ0osS0FBS0ssaUJBQW1CTixFQUFNTSxrQkFBb0JDLElBQ2xETixLQUFLTyxpQkFBbUJSLEVBQU1NLGlCQUc5QixJQUFJRyxFQUFhUixLQUFLSSxtQkFDbEJLLEVBQWFELEVBQVdFLE1BQVFGLEVBQVdHLE9BQzNDTixFQUFtQkwsS0FBS0ssaUJBQ3hCTyxFQUFtQlAsRUFBaUJLLE1BQVFMLEVBQWlCTSxPQU0vRFgsS0FBS2Esa0JBSEhKLEVBR3VCSyxRQUFRRixFQUFtQkgsR0FBWU0sUUFBUSxJQUcvQ2YsS0FBS08sZUFBaUIsRUFBSSxFQWN2RCxTQUFTUyxFQUFxQkMsRUFBVUMsR0FFdEMsSUFra0JnQkMsRUFBSUMsRUFDaEJDLEVBbmtCQUMsRUFBVUosR0FBZSxHQUU3QixHQUF1QixtQkFBWkQsRUFDVCxNQUFNLElBQUlNLE1BQU0sK0JBR2xCLEdBQUlELEVBQVFFLE1BQWlDLEdBQXpCRixFQUFRRSxLQUFLQyxTQUMvQixNQUFNLElBQUlGLE1BQU0sMkJBSWxCdkIsS0FBSzBCLHdCQXVqQldQLEVBdGpCWm5CLEtBQUswQix1QkFBdUJDLEtBQUszQixNQXNqQmpCb0IsRUF0akJ3QnBCLEtBQUs0QixpQkF1akI3Q1AsRUFBUSxLQUNMLFdBRUhBLEVBREdBLEdBQ0tRLFdBQVcsV0FDakJWLElBQ0FFLEVBQVEsTUFDUEQsS0ExakJQcEIsS0FBSzhCLFVBQVliLEVBQ2pCakIsS0FBSytCLG9CQUFzQixH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